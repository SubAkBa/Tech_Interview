## 영속성 컨텍스트 (Persistence Context)

#### 영속성 컨텍스트란?
논리적인 개념이며, 엔티티를 영구 저장하는 환경을 뜻한다.

<br />
<br />

#### 이점
(1) 1차 캐시

엔티티를 조회할 때, 1차 캐시에 엔티티가 존재하면 DB에 접근하지 않고 캐시에 있는 엔티티를 가져온다.

> 2차 캐시 : Application 전체에서 공유하는 캐시

<br />
<br />

(2) 동일성 보장 (Identity)

영속 엔티티의 동일성 (== 비교) 을 보장한다. (동일한 객체)

> 즉, 1차 캐시로 반복가능한 읽기 (Repeatable Read) 등급의 트랜잭션 격리수준을 DB가 아닌 애플리케이션 차원에서 제공한다.

<br />
<br />

(3) 엔티티 '등록'시 트랜잭션을 지원하는 쓰기 지연 (Transactional Write-Behind)

해당 트랜잭션에서 수행된 Insert 쿼리를 모두 쓰기 지연 SQL 저장소에 모았다가 트랜잭션 커밋 시점에 한 번에 처리한다.

<br />
<br />

(4) 엔티티 '수정'시 변경 감지 (Dirty Checking)

엔티티를 수정하고 트랜잭션을 커밋하면, 엔티티 변경을 감지하고 자동으로 Update 쿼리를 처리한다.

<br />
<br />

(5) 엔티티 삭제

(4)번과 마찬가지로 엔티티를 삭제하고 트랜잭션을 커밋하면, 엔티티 삭제를 감지하고 자동으로 Delete 쿼리를 처리한다.
