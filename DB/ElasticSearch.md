## Elastic Search
루씬 (Lucene) 기반 오픈소스 검색엔진

<br />

#### Elastic Search & RDMBS 비교
| Elastic Search | DBMS      |
| -------------- | --------- |
| Index          | DB        |
| Type           | Table     |
| Document       | Row       |
| Field          | Column    |
| Mapping        | Schema    |
| Shard          | Partition |
| Query DSL      | SQL       |

<br />

#### 역색인 (Inverted Index)

일반적인 NoSQL은 지원하지 않는 기능으로, 종이책의 마지막 페이지에서 제공하는 색인 페이지와 비슷하게 제공되는 특수한 데이터 구조다.

역색인 구조는 해당 단어만 찾으면 단어가 포함된 모든 문서의 위치를 알 수 있기 때문에 빠르게 찾을 수 있다.

<img src="../img/es1.png" width="500">


<br />

#### 장단점

장점

(1) 오픈소스 검색엔진으로 끊임없이 개선되고 발전하고 있다.

(2) 고차원적인 전문 (Full-Text) 검색이 가능하다.

> 전문 검색 : 내용 전체를 색인해서 특정 단어가 포함된 문서를 검색하는 것.

(3) 통계 분석이 가능하다.

> 비정형 로그 데이터를 수집하여 통계 분석에 활용할 수 있다.

(4) 스키마리스 (Schemaless)

> 정형화되지 않은 다양한 형태의 문서를 자동으로 색인하고 검색할 수 있다.

(5) RESTful API

> HTTP 기반의 RESTful을 활용하고 요청 / 응답에 JSON을 사용하기 때문에 개발 언어, 운영체제, 시스템에 관계없이 다양한 플랫폼에서 활용이 가능하다.

(6) Multi-tenancy

> 서로 상이한 인덱스일지라도 검색할 필드명만 같으면 여러 인덱스를 한번에 조회할 수 있다.

(7) Document-Oriented

> 여러 계층의 데이터를 JSON 형식의 구조화된 문서로 인덱스에 저장할 수 있다.  
> 또한, 계층 구조로 문서도 한 번의 쿼리로 쉽게 조회할 수 있다.

(8) 확장성과 가용성

> 분산 환경에서 데이터는 샤드 (Shard) 라는 작은 단위로 나뉘어 제공되며, 이를 통해 데이터의 종류와 성격에 따라 데이터를 분산해서 빠르게 처리할 수 있다.

(9) **역색인**

<br />

단점

(1) '실시간'이 아니다.

> 색인된 데이터는 내부적으로 커밋 (Commit) 과 플러시 (FlusH) 같은 복잡한 과정을 거치기 때문에 1초 뒤에나 검색이 가능하다.  
> 엄밀히 따지면 준 실시간 (Near Real Time) 이다.

(2) 트랜잭션과 롤백 기능을 지원하지 않는다.

> 엘라스틱 서치는 기본적으로 분산 시스템으로 구성된다.  
> 전체적인 클러스터의 성능 향상을 위해 비용 소모가 큰 롤백과 트랜잭션을 지원하지 않기 때문에 데이터 손실 위험이 있다.

(3) 데이터의 업데이트를 제공하지 않는다.

> 업데이트 명령이 요청될 경우, 기존 문서를 삭제하고 새로운 문서를 생성하는 방식을 사용하기 때문에 많은 비용이 발생한다.  
> 하지만 이를 통해 **불변성 (Immutable)** 이라는 이점을 취한다.